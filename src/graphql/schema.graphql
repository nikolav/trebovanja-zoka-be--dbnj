schema {
  query: Query
  mutation: Mutation
}

scalar JsonData
scalar NumberReal

#########
## @Query

type Query {
  # api:status
  status: JsonData

  # cache:redis
  cacheRedisGetCacheByKey(cache_key: String!): JsonData!

  # collections
  collectionsDocsByTopic(topic: String!, config: JsonData): JsonData!

}

############
## @Mutation

type Mutation {

  # cache:redis
  cacheRedisCommit(cache_key: String!, patch: JsonData, merge: Boolean ): JsonData!

  # messaging
  cloudMessagingPing(payload: JsonData): JsonData!

  # collections:docs
  collectionsDocsUpsert(topic: String!, patches: [JsonData!]!): JsonData!
  collectionsDocsDrop(topic: String!, ids: [ID!]!): JsonData!
  
}

